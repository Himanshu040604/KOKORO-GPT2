### Overview

This CLI tool generates speech from text using the Kokoro TTS model and saves it as a `.wav` audio file.

### Requirements

* CLI and library must be built 
* A Kokoro GGUF model file (e.g., `Kokoro_no_espeak.gguf`)

### Usage

To see all available options, run:

```bash
./tts-cli --help

--temperature (-t):
    The temperature to use when generating outputs. Defaults to 1.0.
--repetition-penalty (-r):
    The by channel repetition penalty to be applied the sampled output of the model. Defaults to 1.0.
--top-p (-tp):
    (OPTIONAL) The sum of probabilities to sample over. Must be a value between 0.0 and 1.0. Defaults to 1.0.
--n-threads (-nt):
    The number of CPU threads to run generation with. Defaults to hardware concurrency.
--topk (-tk):
    (OPTIONAL) When set to an integer value greater than 0, generation uses nucleus sampling over topk nucleus size. Defaults to 50.
--use-metal (-m):
    (OPTIONAL) Whether to use Metal acceleration (macOS only).
--play:
    (OPTIONAL) Whether to play back the audio immediately instead of saving it to file.
--model-path (-mp):
    (REQUIRED) The local path to the Kokoro GGUF model file.
--prompt (-p):
    (REQUIRED) The text prompt for which to generate audio (in quotation marks).
--save-path (-sp):
    (OPTIONAL) The path to save the audio output in .wav format. Defaults to TTS.cpp.wav
--voice (-v):
    (OPTIONAL) The voice to use for generation. See Voice Support section below.
--espeak-voice-id (-eid):
    (OPTIONAL) The espeak voice ID to use for phonemization. Only needed when the correct espeak voice cannot be inferred from the Kokoro voice (see MultiLanguage Configuration below).
```

### Basic Example

Generate speech and save to a file:

```bash
./tts-cli --model-path /path/to/Kokoro.gguf --prompt "Hello, this speech is generated by kokoro model." --save-path output.wav
```

Play audio directly without saving:

```bash
./tts-cli --model-path /path/to/Kokoro.gguf --prompt "Hello, this speech is generated by kokoro model." --play
```

### Voice Support

Kokoro supports multiple voices which can be set via the `--voice` (`-v`) argument. See the list of available voices in the MultiLanguage Configuration section below.

### MultiLanguage Configuration

Kokoro supports multiple languages with distinct voices. The standard voices are embedded in the Kokoro GGUF file. 

#### Available Voices

```
'af_alloy', 'af_aoede', 'af_bella', 'af_heart', 'af_jessica', 'af_kore', 'af_nicole',
'af_nova', 'af_river', 'af_sarah', 'af_sky', 'am_adam', 'am_echo', 'am_eric', 'am_fenrir',
'am_liam', 'am_michael', 'am_onyx', 'am_puck', 'am_santa', 'bf_alice', 'bf_emma',
'bf_isabella', 'bf_lily', 'bm_daniel', 'bm_fable', 'bm_george', 'bm_lewis', 'ef_dora',
'em_alex', 'em_santa', 'ff_siwis', 'hf_alpha', 'hf_beta', 'hm_omega', 'hm_psi', 'if_sara',
'im_nicola', 'jf_alpha', 'jf_gongitsune', 'jf_nezumi', 'jf_tebukuro', 'jm_kumo', 'pf_dora',
'pm_alex', 'pm_santa', 'zf_xiaobei', 'zf_xiaoni', 'zf_xiaoxiao', 'zf_xiaoyi'
```

#### Voice Naming Convention

Each voice has a language and gender code:
- **First letter**: Language code
- **Second letter**: Gender (`f` = Female, `m` = Male)

Example: `af_alloy` = American English Female voice

#### Language Codes

| Code | Language |
|------|----------|
| `a` | ðŸ‡ºðŸ‡¸ American English |
| `b` | ðŸ‡¬ðŸ‡§ British English |
| `e` | ðŸ‡ªðŸ‡¸ Spanish (es) |
| `f` | ðŸ‡«ðŸ‡· French (fr-fr) |
| `h` | ðŸ‡®ðŸ‡³ Hindi (hi) |
| `i` | ðŸ‡®ðŸ‡¹ Italian (it) |
| `j` | ðŸ‡¯ðŸ‡µ Japanese |
| `p` | ðŸ‡§ðŸ‡· Brazilian Portuguese (pt-br) |
| `z` | ðŸ‡¨ðŸ‡³ Mandarin Chinese |

#### Custom Phonemization

By default, phonemization language is automatically detected based on the selected voice. However, when multiple phonetic alphabets exist for a single language (e.g., Mandarin with Latin vs Pinyin), you may need to specify the espeak-ng voice ID using `--espeak-voice-id`.

To see all available espeak voice IDs:

```bash
espeak-ng --voices
```

### Example with Voice Selection

```bash
./tts-cli --model-path /path/to/Kokoro.gguf --prompt "Hello world" --voice af_bella --save-path output.wav
```

